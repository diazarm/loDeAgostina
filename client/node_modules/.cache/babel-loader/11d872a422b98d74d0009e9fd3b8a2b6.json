{"ast":null,"code":"var _jsxFileName = \"D:\\\\Proyectos\\\\vendeHumo\\\\client\\\\src\\\\context\\\\User\\\\UserState.js\";\nimport React, { useReducer } from 'react';\nimport UserContext from './UserContext';\nimport UserReducer from './UserReducer';\nimport axiosClient from '../../config/axios';\nconst UserState = props => {\n  const initialState = {\n    user: {\n      name: null,\n      email: null\n    },\n    authStatus: false,\n    loading: true\n  };\n  const [globalState, dispatch] = useReducer(UserReducer, initialState);\n  const registerUser = async dataForm => {\n    try {\n      const res = await axiosClient.post(\"/usuario/crear\", dataForm);\n      dispatch({\n        type: \"REGISTRO_EXITOSO\",\n        payload: res.data\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const verifyingToken = async () => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      axiosClient.defaults.headers.common['x-auth-token'] = token;\n    } else {\n      delete axiosClient.defaults.headers.common['x-auth-token'];\n    }\n    try {\n      const respuesta = await axiosClient.get(\"/usuario/verificar-usuario\");\n      dispatch({\n        type: \"OBTENER_USUARIO\",\n        payload: respuesta.data.user\n      });\n    } catch (error) {\n      dispatch({\n        type: \"LOGIN_ERROR\"\n      });\n    }\n  };\n  const loginUser = async dataForm => {\n    try {\n      const respuesta = await axiosClient.post(\"/usuario/iniciar-sesion\", dataForm);\n      dispatch({\n        type: \"LOGIN_EXITOSO\",\n        payload: respuesta.data\n      });\n    } catch (error) {\n      dispatch({\n        type: \"LOGIN_ERROR\"\n      });\n    }\n  };\n  const logoutUser = async () => {\n    dispatch({\n      type: \"LOGOUT_USUARIO\"\n    });\n  };\n  const userSubmitForm = async data => {\n    console.log(\"hola\");\n    const res = await axiosClient.put(\"/usuario/actualizar\", data);\n    console.log(res);\n  };\n  return /*#__PURE__*/React.createElement(UserContext.Provider, {\n    value: {\n      user: globalState.user,\n      authStatus: globalState.authStatus,\n      loading: globalState.loading,\n      registerUser,\n      verifyingToken,\n      loginUser,\n      logoutUser,\n      userSubmitForm\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, props.children);\n};\nexport default UserState;","map":{"version":3,"names":["React","useReducer","UserContext","UserReducer","axiosClient","UserState","props","initialState","user","name","email","authStatus","loading","globalState","dispatch","registerUser","dataForm","res","post","type","payload","data","error","console","log","verifyingToken","token","localStorage","getItem","defaults","headers","common","respuesta","get","loginUser","logoutUser","userSubmitForm","put","createElement","Provider","value","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","children"],"sources":["D:/Proyectos/vendeHumo/client/src/context/User/UserState.js"],"sourcesContent":["import React, { useReducer } from 'react'\nimport UserContext from './UserContext'\nimport UserReducer from './UserReducer'\n\nimport axiosClient from '../../config/axios'\n\nconst UserState = (props) => {\n\n    const initialState = {\n        user: {\n            name: null,\n            email: null,\n        },\n        authStatus: false,\n        loading: true\n    }\n\n\n    const [ globalState, dispatch ] = useReducer(UserReducer, initialState)\n\n    const registerUser = async (dataForm) => {\n\n        try {\n            const res = await axiosClient.post(\"/usuario/crear\", dataForm)\n\n            dispatch({\n                type: \"REGISTRO_EXITOSO\",\n                payload: res.data\n            })\n\n        } catch (error) {\n\n            console.log(error)\n            \n        }\n    }\n\n\n    const verifyingToken = async () => {\n\n        const token = localStorage.getItem('token')\n\n        if(token){\n            axiosClient.defaults.headers.common['x-auth-token'] = token\n        } else{\n            delete axiosClient.defaults.headers.common['x-auth-token']\n        }\n\n        try {\n\n            const respuesta = await axiosClient.get(\"/usuario/verificar-usuario\")\n            \n            dispatch({\n                type: \"OBTENER_USUARIO\",\n                payload: respuesta.data.user\n            })\n\n        } catch (error) {\n            dispatch({\n                type: \"LOGIN_ERROR\"\n            })\n        }\n\n\n    }\n\n\n    const loginUser = async (dataForm) => {\n        \n        try {\n\n            const respuesta = await axiosClient.post(\"/usuario/iniciar-sesion\", dataForm)\n\n            dispatch({\n                type: \"LOGIN_EXITOSO\",\n                payload: respuesta.data\n            })\n\n        } catch (error) {\n            dispatch({\n                type: \"LOGIN_ERROR\"\n            })\n        }\n    }\n\n    const logoutUser = async () => {\n\n        dispatch({\n            type: \"LOGOUT_USUARIO\"\n        })\n\n    }\n\n\n    const userSubmitForm = async (data) => {\n        \n        console.log(\"hola\")\n        const res = await axiosClient.put(\"/usuario/actualizar\", data)\n\n        console.log(res)\n\n    }\n\n    return (\n        <UserContext.Provider value={{\n            user: globalState.user,\n            authStatus: globalState.authStatus,\n            loading: globalState.loading,\n            registerUser,\n            verifyingToken,\n            loginUser,\n            logoutUser,\n            userSubmitForm\n        }}>\n\n            {props.children}\n\n        </UserContext.Provider>\n    )\n}\n\nexport default UserState"],"mappings":"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"},"metadata":{},"sourceType":"module"}